{"version":3,"file":"view.js","mappings":";;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAW;EAErD;EACA,MAAMC,eAAe,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,sBAAsB,CAAC;;EAEzE;EACAD,eAAe,CAACE,OAAO,CAAEC,MAAM,IAAK;IAChC,MAAMC,cAAc,GAAGD,MAAM,CAACE,sBAAsB;IACpD,IAAI,CAACD,cAAc,EAAE;MACjB;IACJ;;IAEA;IACA,MAAME,WAAW,GAAGF,cAAc,CAACG,YAAY,GAAGH,cAAc,CAACI,YAAY,GAAG,CAAC,CAAC,CAAC;IACnF,IAAI,CAACF,WAAW,EAAE;MACd;MACAF,cAAc,CAACK,SAAS,CAACC,MAAM,CAAC,6BAA6B,CAAC;MAC9DP,MAAM,CAACQ,KAAK,CAACC,OAAO,GAAG,MAAM;IACjC;EACJ,CAAC,CAAC;;EAEF;EACA,IAAIC,iBAAiB,GAAG,KAAK;EAE7Bb,eAAe,CAACE,OAAO,CAAC,CAACC,MAAM,EAAEW,KAAK,KAAK;IAEvC;IACA,MAAMV,cAAc,GAAGD,MAAM,CAACE,sBAAsB;IACpD,IAAI,CAACD,cAAc,EAAE;MACjB;MACA;IACJ;;IAEA;IACAD,MAAM,CAACY,mBAAmB,CAAC,OAAO,EAAEC,WAAW,CAAC;;IAEhD;IACAb,MAAM,CAACJ,gBAAgB,CAAC,OAAO,EAAEiB,WAAW,EAAE,IAAI,CAAC;IAEnD,SAASA,WAAWA,CAACC,CAAC,EAAE;MACpB;MACA,IAAIJ,iBAAiB,EAAE;QACnB;MACJ;MAEAA,iBAAiB,GAAG,IAAI;MAGxBI,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;MACnBF,CAAC,CAACG,wBAAwB,CAAC,CAAC;;MAE5B;MACA,MAAMhB,cAAc,GAAG,IAAI,CAACC,sBAAsB;MAClD,IAAI,CAACD,cAAc,EAAE;QACjB;QACAS,iBAAiB,GAAG,KAAK;QACzB;MACJ;MAEA,MAAMQ,UAAU,GAAGjB,cAAc,CAACK,SAAS,CAACa,QAAQ,CAAC,UAAU,CAAC;MAEhE,IAAI,CAACD,UAAU,EAAE;QACb;QACAjB,cAAc,CAACK,SAAS,CAACc,GAAG,CAAC,UAAU,CAAC;QACxC,IAAI,CAACC,WAAW,GAAG,WAAW;QAC9B,IAAI,CAACC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;MAC9C,CAAC,MAAM;QACH;QACArB,cAAc,CAACK,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;QAC3C,IAAI,CAACc,WAAW,GAAG,WAAW;QAC9B,IAAI,CAACC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;MAC/C;;MAGA;MACA,MAAMC,YAAY,GAAG,IAAI,CAACC,OAAO,CAAC,iBAAiB,CAAC;MACpD,MAAMC,cAAc,GAAGF,YAAY,GAAGA,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC,GAAG,IAAI;MACzF,IAAIC,cAAc,EAAE;QAChB;QACAC,UAAU,CAAC,MAAM;UACbD,cAAc,CAACjB,KAAK,CAACmB,MAAM,GAAGJ,YAAY,CAACK,YAAY,GAAG,IAAI;QAClE,CAAC,EAAE,GAAG,CAAC;MACX;;MAEA;MACAF,UAAU,CAAC,MAAM;QACbhB,iBAAiB,GAAG,KAAK;MAC7B,CAAC,EAAE,GAAG,CAAC;IACX;EACJ,CAAC,CAAC;;EAEF;EACA,MAAMmB,eAAe,GAAGlC,QAAQ,CAACmC,aAAa,CAAC,sBAAsB,CAAC;EACtE,IAAID,eAAe,EAAE;IACjB,MAAME,KAAK,GAAGF,eAAe,CAAC/B,gBAAgB,CAAC,iBAAiB,CAAC;IACjE,IAAIkC,YAAY,GAAG,CAAC;IAEpB,MAAMC,UAAU,GAAGJ,eAAe,CAACK,OAAO,CAACC,MAAM,KAAK,OAAO;IAC7D,IAAIC,UAAU,EAAEC,UAAU;IAC1B,IAAIJ,UAAU,EAAE;MACZG,UAAU,GAAGzC,QAAQ,CAAC2C,aAAa,CAAC,QAAQ,CAAC;MAC7CF,UAAU,CAACG,SAAS,GAAG,kCAAkC;MACzDH,UAAU,CAACI,SAAS,GAAG,GAAG;MAC1BJ,UAAU,CAACd,YAAY,CAAC,YAAY,EAAE,iBAAiB,CAAC;MAExDe,UAAU,GAAG1C,QAAQ,CAAC2C,aAAa,CAAC,QAAQ,CAAC;MAC7CD,UAAU,CAACE,SAAS,GAAG,kCAAkC;MACzDF,UAAU,CAACG,SAAS,GAAG,GAAG;MAC1BH,UAAU,CAACf,YAAY,CAAC,YAAY,EAAE,aAAa,CAAC;MAEpDO,eAAe,CAACY,WAAW,CAACL,UAAU,CAAC;MACvCP,eAAe,CAACY,WAAW,CAACJ,UAAU,CAAC;IAC3C;;IAEA;IACA,IAAIN,KAAK,CAACW,MAAM,EAAE;MACdX,KAAK,CAAC,CAAC,CAAC,CAACzB,SAAS,CAACc,GAAG,CAAC,QAAQ,CAAC;MAChCS,eAAe,CAACrB,KAAK,CAACmB,MAAM,GAAGI,KAAK,CAAC,CAAC,CAAC,CAACH,YAAY,GAAG,IAAI;IAC/D;;IAEA;IACA,SAASe,SAASA,CAAChC,KAAK,EAAE;MACtBoB,KAAK,CAAChC,OAAO,CAAC,CAAC6C,IAAI,EAAEC,CAAC,KAAK;QACvBD,IAAI,CAACtC,SAAS,CAACwC,MAAM,CAAC,QAAQ,EAAED,CAAC,KAAKlC,KAAK,CAAC;MAChD,CAAC,CAAC;;MAEF;MACA,MAAMoC,UAAU,GAAGhB,KAAK,CAACpB,KAAK,CAAC;MAC/B,IAAIoC,UAAU,EAAE;QACZlB,eAAe,CAACrB,KAAK,CAACmB,MAAM,GAAGoB,UAAU,CAACnB,YAAY,GAAG,IAAI;MACjE;IACJ;IAEA,SAASoB,SAASA,CAAA,EAAG;MACjBhB,YAAY,GAAG,CAACA,YAAY,GAAG,CAAC,IAAID,KAAK,CAACW,MAAM;MAChDC,SAAS,CAACX,YAAY,CAAC;IAC3B;IAEA,SAASiB,SAASA,CAAA,EAAG;MACjBjB,YAAY,GAAG,CAACA,YAAY,GAAG,CAAC,GAAGD,KAAK,CAACW,MAAM,IAAIX,KAAK,CAACW,MAAM;MAC/DC,SAAS,CAACX,YAAY,CAAC;IAC3B;;IAEA;IACA,IAAIC,UAAU,IAAII,UAAU,IAAID,UAAU,EAAE;MACxCC,UAAU,CAACzC,gBAAgB,CAAC,OAAO,EAAEoD,SAAS,CAAC;MAC/CZ,UAAU,CAACxC,gBAAgB,CAAC,OAAO,EAAEqD,SAAS,CAAC;IACnD;;IAEA;IACA,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIC,UAAU,GAAG,KAAK;IAEtBtB,eAAe,CAACjC,gBAAgB,CAAC,YAAY,EAAGkB,CAAC,IAAK;MAClD,IAAI,CAACA,CAAC,CAACsC,OAAO,IAAItC,CAAC,CAACsC,OAAO,CAACV,MAAM,KAAK,CAAC,EAAE;MAC1CQ,MAAM,GAAGpC,CAAC,CAACsC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO;MAC7BF,UAAU,GAAG,IAAI;IACrB,CAAC,CAAC;IAEFtB,eAAe,CAACjC,gBAAgB,CAAC,WAAW,EAAGkB,CAAC,IAAK;MACjD;MACA,IAAIqC,UAAU,EAAE;QACZrC,CAAC,CAACC,cAAc,CAAC,CAAC;MACtB;IACJ,CAAC,EAAE;MAAEuC,OAAO,EAAE;IAAM,CAAC,CAAC;IAEtBzB,eAAe,CAACjC,gBAAgB,CAAC,UAAU,EAAGkB,CAAC,IAAK;MAChD,IAAI,CAACqC,UAAU,EAAE;MACjB,MAAMI,IAAI,GAAGzC,CAAC,CAAC0C,cAAc,CAAC,CAAC,CAAC,CAACH,OAAO;MACxC,MAAMI,KAAK,GAAGF,IAAI,GAAGL,MAAM;MAE3B,IAAIQ,IAAI,CAACC,GAAG,CAACF,KAAK,CAAC,GAAG,EAAE,EAAE;QAAE;QACxB,IAAIA,KAAK,GAAG,CAAC,EAAE;UACXT,SAAS,CAAC,CAAC;QACf,CAAC,MAAM;UACHC,SAAS,CAAC,CAAC;QACf;MACJ;MACAE,UAAU,GAAG,KAAK;IACtB,CAAC,CAAC;;IAEF;IACA,IAAIS,YAAY,GAAGC,WAAW,CAACb,SAAS,EAAE,IAAI,CAAC;;IAE/C;IACA,IAAIf,UAAU,EAAE;MACZJ,eAAe,CAACjC,gBAAgB,CAAC,YAAY,EAAE,MAAMkE,aAAa,CAACF,YAAY,CAAC,CAAC;MACjF/B,eAAe,CAACjC,gBAAgB,CAAC,YAAY,EAAE,MAAM;QACjDgE,YAAY,GAAGC,WAAW,CAACb,SAAS,EAAE,IAAI,CAAC;MAC/C,CAAC,CAAC;IACN;;IAEA;IACA,IAAIe,UAAU,GAAG,CAAC;IAClB,IAAIC,UAAU,GAAG,KAAK;IAEtBnC,eAAe,CAACjC,gBAAgB,CAAC,WAAW,EAAGkB,CAAC,IAAK;MACjD;MACA,IAAIA,CAAC,CAACd,MAAM,KAAK,CAAC,EAAE;MACpB+D,UAAU,GAAGjD,CAAC,CAACuC,OAAO;MACtBW,UAAU,GAAG,IAAI;MACjB;MACAlD,CAAC,CAACC,cAAc,CAAC,CAAC;IACtB,CAAC,CAAC;IAEFc,eAAe,CAACjC,gBAAgB,CAAC,WAAW,EAAGkB,CAAC,IAAK;MACjD,IAAI,CAACkD,UAAU,EAAE;MACjB;MACAlD,CAAC,CAACC,cAAc,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,MAAMkD,OAAO,GAAIZ,OAAO,IAAK;MACzB,MAAMI,KAAK,GAAGJ,OAAO,GAAGU,UAAU;MAClC,IAAIL,IAAI,CAACC,GAAG,CAACF,KAAK,CAAC,GAAG,EAAE,EAAE;QAAE;QACxB,IAAIA,KAAK,GAAG,CAAC,EAAE;UACXT,SAAS,CAAC,CAAC;QACf,CAAC,MAAM;UACHC,SAAS,CAAC,CAAC;QACf;MACJ;MACAe,UAAU,GAAG,KAAK;IACtB,CAAC;IAEDnC,eAAe,CAACjC,gBAAgB,CAAC,SAAS,EAAGkB,CAAC,IAAK;MAC/C,IAAI,CAACkD,UAAU,EAAE;MACjBC,OAAO,CAACnD,CAAC,CAACuC,OAAO,CAAC;IACtB,CAAC,CAAC;IAEFxB,eAAe,CAACjC,gBAAgB,CAAC,YAAY,EAAE,MAAM;MACjD;MACAoE,UAAU,GAAG,KAAK;IACtB,CAAC,CAAC;EACN;;EAEA;EACA,MAAME,eAAe,GAAGvE,QAAQ,CAACG,gBAAgB,CAAC,uBAAuB,CAAC;EAC1EoE,eAAe,CAACnE,OAAO,CAAEoE,GAAG,IAAK;IAC7B;IACA,IAAIC,SAAS,GAAGD,GAAG,CAACjE,sBAAsB;IAC1C,IAAI,CAACkE,SAAS,IAAI,CAACA,SAAS,CAAC9D,SAAS,CAACa,QAAQ,CAAC,oBAAoB,CAAC,EAAE;MACnEiD,SAAS,GAAGD,GAAG,CAAC3C,OAAO,CAAC,qBAAqB,CAAC;IAClD;IACA,IAAI4C,SAAS,IAAIA,SAAS,CAAC9D,SAAS,CAACa,QAAQ,CAAC,qBAAqB,CAAC,EAAE;MAClEgD,GAAG,CAAC3D,KAAK,CAACC,OAAO,GAAG,MAAM;MAC1B,OAAO,CAAC;IACZ;IAEA0D,GAAG,CAACvE,gBAAgB,CAAC,OAAO,EAAE,YAAW;MACrC,IAAI,IAAI,CAACsC,OAAO,CAACmC,OAAO,KAAK,MAAM,EAAE;QACjC;MACJ;MAEA,MAAMC,OAAO,GAAGC,QAAQ,CAAC,IAAI,CAACrC,OAAO,CAACoC,OAAO,CAAC;MAC9C,MAAME,MAAM,GAAGD,QAAQ,CAAC,IAAI,CAACrC,OAAO,CAACsC,MAAM,CAAC;MAC5C,MAAMC,KAAK,GAAG,IAAI,CAACvC,OAAO,CAACuC,KAAK,IAAI,KAAK;MAEzC,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;MACpCD,MAAM,CAACE,MAAM,CAAC,QAAQ,EAAE,sBAAsB,CAAC;MAC/CF,MAAM,CAACE,MAAM,CAAC,OAAO,EAAEC,MAAM,CAACC,SAAS,CAACC,KAAK,CAAC;MAC9CL,MAAM,CAACE,MAAM,CAAC,UAAU,EAAEN,OAAO,CAAC;MAClCI,MAAM,CAACE,MAAM,CAAC,QAAQ,EAAEJ,MAAM,CAAC;MAC/BE,MAAM,CAACE,MAAM,CAAC,OAAO,EAAEH,KAAK,CAAC;MAE7B,IAAI,CAACvC,OAAO,CAACmC,OAAO,GAAG,MAAM;MAE7BW,KAAK,CAACH,MAAM,CAACC,SAAS,CAACG,QAAQ,EAAE;QAC7BC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAoC,CAAC;QAChEC,IAAI,EAAEV,MAAM,CAACW,QAAQ,CAAC;MAC1B,CAAC,CAAC,CACGC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;QACV,IAAI,CAACA,IAAI,CAACC,IAAI,CAAC,CAAC,EAAE;UACd;UACA,IAAI,CAAClF,KAAK,CAACC,OAAO,GAAG,MAAM;UAC3B;QACJ;QAEA,IAAIkF,OAAO,GAAG,IAAI,CAACzF,sBAAsB;QACzC,IAAI,CAACyF,OAAO,IAAI,CAACA,OAAO,CAACrF,SAAS,CAACa,QAAQ,CAAC,oBAAoB,CAAC,EAAE;UAC/DwE,OAAO,GAAG,IAAI,CAACnE,OAAO,CAAC,qBAAqB,CAAC;QACjD;QACA,IAAI,CAACmE,OAAO,EAAE;QAEd,MAAMC,OAAO,GAAGjG,QAAQ,CAAC2C,aAAa,CAAC,KAAK,CAAC;QAC7CsD,OAAO,CAACpD,SAAS,GAAGiD,IAAI;QAExB,MAAMI,QAAQ,GAAGD,OAAO,CAAC9F,gBAAgB,CAAC,iBAAiB,CAAC;QAC5D+F,QAAQ,CAAC9F,OAAO,CAAC6C,IAAI,IAAI+C,OAAO,CAAClD,WAAW,CAACG,IAAI,CAAC,CAAC;;QAEnD;QACA,MAAMkD,SAAS,GAAGtB,MAAM,GAAGF,OAAO;QAClC,IAAI,CAACpC,OAAO,CAACsC,MAAM,GAAGsB,SAAS;;QAE/B;QACA,IAAID,QAAQ,CAACnD,MAAM,GAAG4B,OAAO,EAAE;UAC3B,IAAI,CAAC9D,KAAK,CAACC,OAAO,GAAG,MAAM;QAC/B;;QAEA;AACpB;AACA;AACA;AACA;AACA;QACoBoF,QAAQ,CAAC9F,OAAO,CAAE6C,IAAI,IAAK;UACvB,MAAMmD,WAAW,GAAGnD,IAAI,CAACd,aAAa,CAAC,sBAAsB,CAAC;UAC9D,IAAI,CAACiE,WAAW,EAAE;YACd,OAAO,CAAC;UACZ;;UAEA;UACA;UACA,IAAIA,WAAW,CAAC7D,OAAO,CAAC8D,aAAa,KAAK,MAAM,EAAE;YAC9C;UACJ;UAEA,MAAM/F,cAAc,GAAG8F,WAAW,CAAC7F,sBAAsB;UACzD,IAAID,cAAc,EAAE;YAChB,MAAME,WAAW,GAAGF,cAAc,CAACG,YAAY,GAAIH,cAAc,CAACI,YAAY,GAAG,CAAE;YACnF,IAAI,CAACF,WAAW,EAAE;cACd;cACAF,cAAc,CAACK,SAAS,CAACC,MAAM,CAAC,6BAA6B,CAAC;cAC9DwF,WAAW,CAACvF,KAAK,CAACC,OAAO,GAAG,MAAM;YACtC;UACJ;;UAEA;UACAsF,WAAW,CAACnG,gBAAgB,CACxB,OAAO,EACP,UAAUkB,CAAC,EAAE;YACTA,CAAC,CAACC,cAAc,CAAC,CAAC;YAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;YACnBF,CAAC,CAACG,wBAAwB,CAAC,CAAC;YAE5B,MAAM0E,OAAO,GAAG,IAAI,CAACzF,sBAAsB;YAC3C,IAAI,CAACyF,OAAO,EAAE;cACV;YACJ;YAEA,MAAMM,QAAQ,GAAGN,OAAO,CAACrF,SAAS,CAACa,QAAQ,CAAC,UAAU,CAAC;YACvD,IAAI,CAAC8E,QAAQ,EAAE;cACXN,OAAO,CAACrF,SAAS,CAACc,GAAG,CAAC,UAAU,CAAC;cACjC,IAAI,CAACC,WAAW,GAAG,WAAW;cAC9B,IAAI,CAACC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;YAC9C,CAAC,MAAM;cACHqE,OAAO,CAACrF,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;cACpC,IAAI,CAACc,WAAW,GAAG,WAAW;cAC9B,IAAI,CAACC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;YAC/C;;YAEA;AAChC;AACA;AACA;YACgC,MAAMC,YAAY,GAAG,IAAI,CAACC,OAAO,CAAC,iBAAiB,CAAC;YACpD,MAAMC,cAAc,GAAGF,YAAY,GAAGA,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC,GAAG,IAAI;YACzF,IAAIC,cAAc,EAAE;cAChBC,UAAU,CAAC,MAAM;gBACbD,cAAc,CAACjB,KAAK,CAACmB,MAAM,GAAGJ,YAAY,CAACK,YAAY,GAAG,IAAI;cAClE,CAAC,EAAE,GAAG,CAAC;YACX;UACJ,CAAC,EACD,IACJ,CAAC;;UAED;UACAmE,WAAW,CAAC7D,OAAO,CAAC8D,aAAa,GAAG,MAAM;QAC9C,CAAC,CAAC;QACF;QACA;QACA;MACJ,CAAC,CAAC,CACDE,KAAK,CAACC,GAAG,IAAI;QACVC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;MACpD,CAAC,CAAC,CACDG,OAAO,CAAC,MAAM;QACX,IAAI,CAACpE,OAAO,CAACmC,OAAO,GAAG,OAAO;MAClC,CAAC,CAAC;IACV,CAAC,CAAC;EACN,CAAC,CAAC;;EAEF;EACA1E,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAASkB,CAAC,EAAE;IAC3C,IAAIA,CAAC,CAACyF,MAAM,KAAKzF,CAAC,CAACyF,MAAM,CAACjG,SAAS,CAACa,QAAQ,CAAC,qBAAqB,CAAC,IAAIL,CAAC,CAACyF,MAAM,CAACjG,SAAS,CAACa,QAAQ,CAAC,sBAAsB,CAAC,CAAC,EAAE;MACzHL,CAAC,CAACyF,MAAM,CAACC,IAAI,CAAC,CAAC;IACnB;EACJ,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://brightlocal-reviews/./src/view.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    \n    // Read More functionality\n    const readMoreButtons = document.querySelectorAll('.bl-review-read-more');\n\n    // Hide buttons that are not needed (content not truncated)\n    readMoreButtons.forEach((button) => {\n        const contentWrapper = button.previousElementSibling;\n        if (!contentWrapper) {\n            return;\n        }\n\n        // If the content wrapper does not overflow, it means text fits and no read more is required\n        const needsToggle = contentWrapper.scrollHeight > contentWrapper.clientHeight + 1; // +1 to account for rounding differences\n        if (!needsToggle) {\n            // Remove truncated class & hide button entirely\n            contentWrapper.classList.remove('bl-review-content-truncated');\n            button.style.display = 'none';\n        }\n    });\n\n    // Track if a click is in progress to prevent double-triggering\n    let isClickInProgress = false;\n    \n    readMoreButtons.forEach((button, index) => {\n        \n        // Verify the button structure\n        const contentWrapper = button.previousElementSibling;\n        if (!contentWrapper) {\n            // Button missing content wrapper, skip\n            return;\n        }\n        \n        // Remove any existing click handlers to prevent duplicates\n        button.removeEventListener('click', handleClick);\n        \n        // Add a test click handler to verify the button is clickable\n        button.addEventListener('click', handleClick, true);\n         \n        function handleClick(e) {\n            // Prevent multiple triggers\n            if (isClickInProgress) {\n                return;\n            }\n            \n            isClickInProgress = true;\n            \n            \n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            \n            // Get the content wrapper again to ensure we have the latest reference\n            const contentWrapper = this.previousElementSibling;\n            if (!contentWrapper) {\n                // Content wrapper not found: abort\n                isClickInProgress = false;\n                return;\n            }\n            \n            const isExpanded = contentWrapper.classList.contains('expanded');\n            \n            if (!isExpanded) {\n                // expanding content\n                contentWrapper.classList.add('expanded');\n                this.textContent = 'Show Less';\n                this.setAttribute('aria-expanded', 'true');\n            } else {\n                // collapsing content\n                contentWrapper.classList.remove('expanded');\n                this.textContent = 'Read More';\n                this.setAttribute('aria-expanded', 'false');\n            }\n            \n            \n            /* If inside carousel, adjust wrapper height after transition */\n            const reviewItemEl = this.closest('.bl-review-item');\n            const carouselParent = reviewItemEl ? reviewItemEl.closest('.bl-reviews-carousel') : null;\n            if (carouselParent) {\n                // Wait a bit for CSS transition (content expand) to complete\n                setTimeout(() => {\n                    carouselParent.style.height = reviewItemEl.offsetHeight + 'px';\n                }, 350);\n            }\n            \n            // Reset click in progress after a short delay\n            setTimeout(() => {\n                isClickInProgress = false;\n            }, 100);\n        }\n    });\n\n    // Carousel functionality\n    const carouselWrapper = document.querySelector('.bl-reviews-carousel');\n    if (carouselWrapper) {\n        const items = carouselWrapper.querySelectorAll('.bl-review-item');\n        let currentIndex = 0;\n\n        const showArrows = carouselWrapper.dataset.arrows !== 'false';\n        let prevButton, nextButton;\n        if (showArrows) {\n            prevButton = document.createElement('button');\n            prevButton.className = 'bl-carousel-nav bl-carousel-prev';\n            prevButton.innerHTML = '←';\n            prevButton.setAttribute('aria-label', 'Previous review');\n\n            nextButton = document.createElement('button');\n            nextButton.className = 'bl-carousel-nav bl-carousel-next';\n            nextButton.innerHTML = '→';\n            nextButton.setAttribute('aria-label', 'Next review');\n\n            carouselWrapper.appendChild(prevButton);\n            carouselWrapper.appendChild(nextButton);\n        }\n\n        // Show first item\n        if (items.length) {\n            items[0].classList.add('active');\n            carouselWrapper.style.height = items[0].offsetHeight + 'px';\n        }\n\n        // Navigation functions\n        function showSlide(index) {\n            items.forEach((item, i) => {\n                item.classList.toggle('active', i === index);\n            });\n\n            // Adjust wrapper height to match active slide\n            const activeItem = items[index];\n            if (activeItem) {\n                carouselWrapper.style.height = activeItem.offsetHeight + 'px';\n            }\n        }\n\n        function nextSlide() {\n            currentIndex = (currentIndex + 1) % items.length;\n            showSlide(currentIndex);\n        }\n\n        function prevSlide() {\n            currentIndex = (currentIndex - 1 + items.length) % items.length;\n            showSlide(currentIndex);\n        }\n\n        // Event listeners (buttons)\n        if (showArrows && nextButton && prevButton) {\n            nextButton.addEventListener('click', nextSlide);\n            prevButton.addEventListener('click', prevSlide);\n        }\n\n        // Swipe support\n        let startX = 0;\n        let isTouching = false;\n\n        carouselWrapper.addEventListener('touchstart', (e) => {\n            if (!e.touches || e.touches.length === 0) return;\n            startX = e.touches[0].clientX;\n            isTouching = true;\n        });\n\n        carouselWrapper.addEventListener('touchmove', (e) => {\n            // Prevent vertical scroll being treated as swipe\n            if (isTouching) {\n                e.preventDefault();\n            }\n        }, { passive: false });\n\n        carouselWrapper.addEventListener('touchend', (e) => {\n            if (!isTouching) return;\n            const endX = e.changedTouches[0].clientX;\n            const diffX = endX - startX;\n\n            if (Math.abs(diffX) > 50) { // threshold\n                if (diffX < 0) {\n                    nextSlide();\n                } else {\n                    prevSlide();\n                }\n            }\n            isTouching = false;\n        });\n\n        // Auto-advance every 5 seconds\n        let autoInterval = setInterval(nextSlide, 5000);\n\n        // Optionally pause on hover—only when arrows are visible (interactive mode)\n        if (showArrows) {\n            carouselWrapper.addEventListener('mouseenter', () => clearInterval(autoInterval));\n            carouselWrapper.addEventListener('mouseleave', () => {\n                autoInterval = setInterval(nextSlide, 5000);\n            });\n        }\n\n        // Mouse drag (desktop) support — mirrors the touch swipe logic above\n        let dragStartX = 0;\n        let isDragging = false;\n\n        carouselWrapper.addEventListener('mousedown', (e) => {\n            // Only respond to primary button\n            if (e.button !== 0) return;\n            dragStartX = e.clientX;\n            isDragging = true;\n            // Prevent image dragging / text selection\n            e.preventDefault();\n        });\n\n        carouselWrapper.addEventListener('mousemove', (e) => {\n            if (!isDragging) return;\n            // Prevent text selection while dragging\n            e.preventDefault();\n        });\n\n        const endDrag = (clientX) => {\n            const diffX = clientX - dragStartX;\n            if (Math.abs(diffX) > 50) { // same threshold as touch\n                if (diffX < 0) {\n                    nextSlide();\n                } else {\n                    prevSlide();\n                }\n            }\n            isDragging = false;\n        };\n\n        carouselWrapper.addEventListener('mouseup', (e) => {\n            if (!isDragging) return;\n            endDrag(e.clientX);\n        });\n\n        carouselWrapper.addEventListener('mouseleave', () => {\n            // Cancel drag if cursor leaves carousel bounds\n            isDragging = false;\n        });\n    }\n\n    /* Load More functionality for paginated reviews */\n    const loadMoreButtons = document.querySelectorAll('.bl-reviews-load-more');\n    loadMoreButtons.forEach((btn) => {\n        // If associated wrapper is carousel, remove button entirely\n        let wrapperEl = btn.previousElementSibling;\n        if (!wrapperEl || !wrapperEl.classList.contains('bl-reviews-wrapper')) {\n            wrapperEl = btn.closest('.bl-reviews-wrapper');\n        }\n        if (wrapperEl && wrapperEl.classList.contains('bl-reviews-carousel')) {\n            btn.style.display = 'none';\n            return; // skip attaching listeners\n        }\n\n        btn.addEventListener('click', function() {\n            if (this.dataset.loading === 'true') {\n                return;\n            }\n\n            const perPage = parseInt(this.dataset.perPage);\n            const offset = parseInt(this.dataset.offset);\n            const label = this.dataset.label || 'all';\n\n            const params = new URLSearchParams();\n            params.append('action', 'bl_load_more_reviews');\n            params.append('nonce', window.blReviews.nonce);\n            params.append('per_page', perPage);\n            params.append('offset', offset);\n            params.append('label', label);\n\n            this.dataset.loading = 'true';\n\n            fetch(window.blReviews.ajax_url, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n                body: params.toString()\n            })\n                .then(response => response.text())\n                .then(html => {\n                    if (!html.trim()) {\n                        // No more content\n                        this.style.display = 'none';\n                        return;\n                    }\n\n                    let wrapper = this.previousElementSibling;\n                    if (!wrapper || !wrapper.classList.contains('bl-reviews-wrapper')) {\n                        wrapper = this.closest('.bl-reviews-wrapper');\n                    }\n                    if (!wrapper) return;\n\n                    const tempDiv = document.createElement('div');\n                    tempDiv.innerHTML = html;\n\n                    const newItems = tempDiv.querySelectorAll('.bl-review-item');\n                    newItems.forEach(item => wrapper.appendChild(item));\n\n                    // Update offset\n                    const newOffset = offset + perPage;\n                    this.dataset.offset = newOffset;\n\n                    // Hide button if fewer items returned than requested (means no more posts)\n                    if (newItems.length < perPage) {\n                        this.style.display = 'none';\n                    }\n\n                    /* -----------------------------------------------------\n                     * Re-initialise \"Read More\" functionality for the items\n                     * that were just appended via \"Load More\". We replicate\n                     * the same logic that runs on initial page load so that\n                     * newly-added reviews get the expandable behaviour.\n                     * --------------------------------------------------- */\n                    newItems.forEach((item) => {\n                        const readMoreBtn = item.querySelector('.bl-review-read-more');\n                        if (!readMoreBtn) {\n                            return; // No read-more button inside this item\n                        }\n\n                        // Prevent duplicate listeners if, for some reason, we\n                        // re-initialise the same node again.\n                        if (readMoreBtn.dataset.rmInitialized === 'true') {\n                            return;\n                        }\n\n                        const contentWrapper = readMoreBtn.previousElementSibling;\n                        if (contentWrapper) {\n                            const needsToggle = contentWrapper.scrollHeight > (contentWrapper.clientHeight + 1);\n                            if (!needsToggle) {\n                                // Content already fully visible – hide button\n                                contentWrapper.classList.remove('bl-review-content-truncated');\n                                readMoreBtn.style.display = 'none';\n                            }\n                        }\n\n                        // Click handler (mirrors the one attached on DOM load)\n                        readMoreBtn.addEventListener(\n                            'click',\n                            function (e) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                e.stopImmediatePropagation();\n\n                                const wrapper = this.previousElementSibling;\n                                if (!wrapper) {\n                                    return;\n                                }\n\n                                const expanded = wrapper.classList.contains('expanded');\n                                if (!expanded) {\n                                    wrapper.classList.add('expanded');\n                                    this.textContent = 'Show Less';\n                                    this.setAttribute('aria-expanded', 'true');\n                                } else {\n                                    wrapper.classList.remove('expanded');\n                                    this.textContent = 'Read More';\n                                    this.setAttribute('aria-expanded', 'false');\n                                }\n\n                                /* If this review lives in a carousel, resize the\n                                 * carousel container so the expanded content is\n                                 * fully visible.\n                                 */\n                                const reviewItemEl = this.closest('.bl-review-item');\n                                const carouselParent = reviewItemEl ? reviewItemEl.closest('.bl-reviews-carousel') : null;\n                                if (carouselParent) {\n                                    setTimeout(() => {\n                                        carouselParent.style.height = reviewItemEl.offsetHeight + 'px';\n                                    }, 350);\n                                }\n                            },\n                            true\n                        );\n\n                        // Mark as initialised so we don't double-bind later.\n                        readMoreBtn.dataset.rmInitialized = 'true';\n                    });\n                    // ---------------------------------------------------------\n                    // END re-initialise read-more for dynamically loaded items\n                    // ---------------------------------------------------------\n                })\n                .catch(err => {\n                    console.error('Error loading more reviews', err);\n                })\n                .finally(() => {\n                    this.dataset.loading = 'false';\n                });\n        });\n    });\n\n    // Remove focus after click to prevent sticky :focus styles\n    document.addEventListener('click', function(e) {\n        if (e.target && (e.target.classList.contains('bl-review-read-more') || e.target.classList.contains('bl-reviews-load-more'))) {\n            e.target.blur();\n        }\n    });\n}); "],"names":["document","addEventListener","readMoreButtons","querySelectorAll","forEach","button","contentWrapper","previousElementSibling","needsToggle","scrollHeight","clientHeight","classList","remove","style","display","isClickInProgress","index","removeEventListener","handleClick","e","preventDefault","stopPropagation","stopImmediatePropagation","isExpanded","contains","add","textContent","setAttribute","reviewItemEl","closest","carouselParent","setTimeout","height","offsetHeight","carouselWrapper","querySelector","items","currentIndex","showArrows","dataset","arrows","prevButton","nextButton","createElement","className","innerHTML","appendChild","length","showSlide","item","i","toggle","activeItem","nextSlide","prevSlide","startX","isTouching","touches","clientX","passive","endX","changedTouches","diffX","Math","abs","autoInterval","setInterval","clearInterval","dragStartX","isDragging","endDrag","loadMoreButtons","btn","wrapperEl","loading","perPage","parseInt","offset","label","params","URLSearchParams","append","window","blReviews","nonce","fetch","ajax_url","method","headers","body","toString","then","response","text","html","trim","wrapper","tempDiv","newItems","newOffset","readMoreBtn","rmInitialized","expanded","catch","err","console","error","finally","target","blur"],"sourceRoot":""}